# 投資管理のためのチャットボットを作成する

### 個人投資ポートフォリオを管理するためのサービス・ベースのチャットボットを作成する

English version: https://developer.ibm.com/patterns/create-an-investment-management-chatbot
  ソースコード: https://github.com/IBM/personal-wealth-portfolio-mgt-bot/

###### 最新の英語版コンテンツは上記URLを参照してください。
last_updated: 2017-06-06

 ## 概要

Watson Assistant を利用して、投資に関する照会と有価証券の分析に対応できる、複数のインターフェースを備えた財務チャットボットを作成します。

## 説明

チャットボットの評価は急上昇し、顧客とのあらゆる類のコミュニケーションで標準となりつつあります。このコード・パターンでは、Investment Portfolio サービスを利用して投資ポートフォリオおよび関連する債権を照会するために使える、Watson Assistant ベースのチャットボットを作成します。特定のシナリオに基づいて有価証券のアナリティクス結果を計算するために、Simulated Instrument Analytics を使用します。また、標準的な Web インターフェースと Twilio インターフェースを入れ替える方法も説明します。

このコード・パターンを完了すると、以下の方法がわかるようになります。

* Watson Assistant を使用してチャットボットのダイアログを作成する
* Watson Assistant ボットを使用して複数のインターフェース (Web と Twilio) をセットアップする
* Investment Portfolio サービスにアクセスして、データをシードして送信する
* データをシナリオと併せて Simulated Instrument Analytics サービスに送信し、アナリティクス結果を取得する

## フロー

![フロー](../../images/Create-an-investment-management-chatbot.png)

1. 開発者が複数の通信チャネル (例えば、WebUI や Twilio など) をセットアップします。アプリケーションはどちらのチャネルからのメッセージも listen します。
1. Assistant API が自然言語の入力を取り込んで分割し、あらかじめ行われたトレーニングに基づいて、分割後の入力をインテントとエンティティーにマッピングします。アプリは分類されたインテントに基づいて該当する財務サービスを呼び出します。
1. 会話のコンテキストは Cloudant DB に保存されるので、Assistant API は状態を保存してユーザーとの会話のフローを追跡できます。
1. 債権またはポートフォリオに関する情報が照会された場合は、Portfolio Investment API が呼び出されます。照会を実行し、照会結果を返すために、「Promise リクエスト」を介した非同期呼び出しが行われます。続いて、レスポンス・オブジェクト内の照会結果が解析されてフォーマット化された上で、Assistant インターフェースに返されます。
1. インテントが「影響分析」として識別された場合は、Simulated Analytics API が呼び出されます。この呼び出しでは最初に非同期「Promise リクエスト」を発行し、Portfolio Investment API を使用してユーザーが現在所有している債権の名前を照会する必要があります。債権の名前がオブジェクト内に保管され、そのオブジェクトが Simulated Instrument Analytics (SIA) サービスに送信されます。SIA は受け取ったオブジェクトから基準価格と条件付き価格を抽出し、それを潜在的市価変動と突き合わせて、このシナリオでの債権に対する影響の評価を返します (この使用ケースでは、市価変動のシナリオにより、S&P 500 が 5% 下落した場合のポートフォリオへの影響を照会します)。レスポンス・オブジェクト内の結果は解析されてフォーマット化された上で、Assistant インターフェースに返されます。
