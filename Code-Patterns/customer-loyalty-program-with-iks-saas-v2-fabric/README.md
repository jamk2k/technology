# ブロックチェーン対応のカスタマー・ロイヤルティー・プログラムを作成する

### Hyperledger Fabric V1.4、IBM Blockchain、Node.js を使用して Web アプリとネットワークを作成する

English version: https://developer.ibm.com/patterns/customer-loyalty-program-with-iks-saas-v2-fabric
  ソースコード: https://github.com/IBM/customer-loyalty-program-hyperledger-fabric-VSCode

###### 最新の英語版コンテンツは上記URLを参照してください。
last_updated: 2019-04-05

 
## 概要

このコード・パターンは、Hyperledger Fabric と IBM Blockchain の VS Code 拡張機能を使用してブロックチェーン・アプリケーションの構築を開始することを目指している開発者を対象にしています。ローカルの Fabric ネットワーク上に Hyperledger Fabric カスタマー特典プログラム・ネットワークをセットアップする方法、IBM Blockchain の VS Code 拡張機能を使用してスマート・コントラクトをインストールし、インスタンス化する方法、Hyperledger Fabric SDK を使用してデプロイ済みネットワークとやり取りする Node.js Web アプリケーションを開発する方法を学んでください。

## 説明

カスタマー・ロイヤルティー・プログラムは、企業が頻繁に買い物をしてくれる得意客にその見返りを得てもらうための手段です。プログラムのメンバーは商品を購入するとポイントを獲得します。ポイントは割引や景品、あるいは特別な待遇といった何らかの特典に交換できるため、メンバーは特典と交換するために一定のポイント数をためようとします。ロイヤルティー・プログラムに複数の企業がパートナーとして関与していて、それらの企業が顧客ベースに対してサービスを提供する場合もあります。けれども現状のロイヤルティー・プログラム・システムではパートナー間の関係に制約が課せられるため、メンバーに対するプログラムの可視性が損なわれがちです。こうした制約を取り除く方法となるのが、ブロックチェーン・ネットワーク上にカスタマー・ロイヤルティー・プログラムを作成することです。カスタマー・ロイヤルティー・プログラムを対象としたこのブロックチェーン・モデルは、プログラムのメンバーに対してはポイントの価値を高め、パートナーに対しては信頼の置けるトランザクションによって新しい価値をもたらすことになります。こうした参加者間の関係を深めるネットワークは、ポイントを中心として全参加者を結び付けます。

この開発者コード・パターンでは、Hyperledger Fabric と Node.js を使用して、カスタマー・ロイヤルティー・プログラムをブロックチェーン Web アプリケーションとして作成する方法を説明します。プログラムのメンバーはこのアプリケーションを使用してネットワークに登録し、自分のアカウントを作成します。メンバーは、各自のアカウント番号によってネットワーク上で識別され、ネットワークにサインインするときに使用するアクセス・キーを作成します。アクセス・キーは、トランザクションやレコードのクエリーを行う際のカード ID としても使用します。メンバーはサインインして、トランザクションを行ってポイントを獲得したり、ネットワーク上のパートナーが提供する特典とポイントを交換したりできます。これらのトランザクションはブロックチェーン・レジャー内に記録されるため、メンバーは自分が行ったトランザクションを表示することができます。このコード・パターンでは、メンバーが自分のトランザクションしか表示できないよう、ブロックチェーン・ネットワークの一環としてパーミッションを使用する方法も説明します。

パートナーも同様に、ID を作成してネットワークに登録し、記録を表示するためのアクセス・キーを取得します。パートナーに表示が許可されるトランザクションは、そのパートナーが参加したものだけです。自らが参加してポイントを与えたり交換したりしたトランザクションについては、すべて追跡することができます。このコード・パターンで作成する Web アプリケーションは、パートナーがメンバーに割り当てるか、特典と交換したすべてのポイントを表示するための基本的なダッシュボードです。トランザクションが複雑になってきたら、パートナーはトランザクションを分析して有益な情報を入手できるダッシュボードを作成できます。

このコード・パターンは、Hyperledger Fabric と IBM Blockchain の VS Code 拡張機能を使用してブロックチェーン・アプリケーションの構築を開始することを目指している開発者を対象にしています。このコード・パターンをひと通り完了すると、以下の方法がわかるようになります。

* IBM Blockchain の VS Code 拡張機能をベースに Hyperledger Fabric ネットワークをセットアップする
* ローカルの Fabric に接続し、IBM Blockchain の VS Code 拡張機能によってスマート・コントラクトをインストールしてインスタンス化する
* Hyperledger Fabric SDK を使用して、デプロイ済みネットワークとやり取りする Node.js Web アプリケーションを開発する

## フロー

![カスタマー・ロイヤルティー・プログラムの図](../../images/arch.png)

_**注:** ブロックチェーン・ネットワークには複数のメンバーとパートナーが参加します。_

1. メンバーがネットワークに登録します。
1. メンバーはアプリケーションにサインインして、ポイントを獲得または交換するためのトランザクションを行います。また、トランザクションを表示することもできます。
1. パートナーがネットワークに登録します。
1. パートナーはアプリケーションにサインインして、トランザクションを確認したり、ダッシュボードを表示したりできます。

## 手順

このパターンに取り組む準備はできましたか？詳細な手順については、[README](https://github.com/IBM/customer-loyalty-program-hyperledger-fabric-VSCode/blob/master/README.md) ファイルを参照してください。
