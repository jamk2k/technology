# Kitura と Kubernetes を使用した歩数計アプリを設計する 

### Kubernetes 上のネイティブ iOS アプリと Kitura を使用した、フルスタックの Swift アプリケーションを開発する

English version: https://developer.ibm.com/patterns/design-a-step-tracking-app-with-kitura-and-kubernetes
  ソースコード: https://github.com/IBM/kitura-on-kubernetes/

###### 最新の英語版コンテンツは上記URLを参照してください。
last_updated: 2018-08-08

 ## 概要

フルスタック開発はやっかいなタスクになりがちです。複数の異なる言語とフレームワークを使用してコードを作成するとなると、事態が混乱してくることは避けられないためです。けれども Swift がオープンソース化されたことにより、さまざまな局面が変わってきました。最大の変化は、iOS 開発者が Swift だけを使用してバックエンドをコーティングできるようになったことです。強力なサーバー・サイド Swift Web フレームワークの 1 つとして挙げられる Kitura を使用すれば、開発者はアプリケーションのロジックに集中し、より多くの時間をその作業に費やせるようになります。Kitura は Kubernetes 内にデプロイすることもできます。その場合、Kitura はパブリック・ドメイン内で公開されて、iOS アプリのバックエンド・インフラストラクチャーとしての役割を果たします。

## 説明

このパターンでは、Swift を使用して iOS 歩数計アプリを作成します。このアプリケーションのバックエンドは同じく Swift で作成されていて、サーバー・サイドの Swift Web フレームワークである Kitura が使用されています。このパターンで対象としているのは、フロントエンドとバックエンドを同じ 1 つの言語で作成したいと思っている iOS 開発者です。同じ 1 つの言語で作業できれば、開発者は別のプログラミング言語を新しく学んだり扱ったりするのではなく、アプリケーションのロジックに集中し、より多くの時間をその作業に費やすことができます。3 つの単純な Kitura マイクロサービスは、コンテナー・オーケストレーション・プラットフォーム Kubernetes 内にデプロイします。サンプル iOS アプリとして取り上げるのは、ユーザーが歩いた分だけ「フィットコイン」を獲得できる歩数トラッカーです。

このコード・パターンをひととおり完了すると、以下の方法がわかるようになります。

* Kitura を使用してサーバー・サイドの Swift アプリケーションを作成する
* Swift Kuery で Kitura を使用してデータベースに接続する
* Kitura マイクロサービスを Kubernetes 内にデプロイする
* iOS アプリに Kitura バックエンドを統合する
* TLS を使用して Kubernetes をパブリック・ドメイン内で使用できるようにする

## フロー

![フロー](../../images/step-tracker-app_arch-diagram.png)

1. iOS アプリが初めて開かれたときに、「Users」マイクロサービスを介してユーザーの登録を試みます。
1. 「Users」マイクロサービスが、ユーザーにアバターを割り当てるために外部サービスと通信します。
1. ユーザーにアバターを割り当てた後、「Users」マイクロサービスはユーザーのすべての情報をデータベース内に維持します。また、「Users」マイクロサービスはユーザーの歩数を更新して、ユーザーに「フィットコイン」を与えます。
1. 「Leaderboard」マイクロサービスは、データベース内に保管されたデータに基づき、フィットコイン獲得数をユーザーに表示するための手段です。
1. 「Shop」マイクロサービスは、データベースから製品を取得します。ユーザーはこのデータベースで「フィットコイン」と製品を交換できます。ユーザーが製品を「フィットコイン」と交換すると、(トランザクションを作成するための) API がユーザーのフィットコイン数を更新します。

## 手順

このパターンを使用する準備ができたら、このアプリケーションを起動して使用する手順の詳細について、[README](https://github.com/IBM/kitura-on-kubernetes/blob/master/README.md) を参照してください。